[install]
# Link workspace packages into node_modules
linkWorkspacePackages = true

[serve]
# Customize the dev server
port = 3000

[build]
# Default options for bun build (server bundle)
entrypoints = ["src/index.ts"]
outdir = "dist"
target = "bun"
external = ["@prisma/client", "@prisma/adapter-pg"]
# Avoid bundling node packages to keep Prisma generated client (.prisma) resolvable at runtime.
# This prevents bundlers from trying to inline internal .prisma paths such as ".prisma/client/default".
packages = "external"
minify = true
sourcemap = "external"

[test]
preload = ["./test/happydom.ts", "./test/setupTests.ts"]
